(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{299:function(t,e,a){"use strict";a.r(e);var s=a(43),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware","aria-hidden":"true"}},[t._v("#")]),t._v(" Middleware")]),t._v(" "),a("p",[t._v("This package comes with "),a("code",[t._v("ContentNegotiation")]),t._v(" and "),a("code",[t._v("ETag")]),t._v(" middleware. You can add them inside your "),a("code",[t._v("app/Http/Kernel.php")]),t._v(" file.")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#content-negotiation-middleware"}},[t._v("ContentNegotiation Middleware")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#etag-middleware"}},[t._v("ETag Middleware")])])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$routeMiddleware")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'api_headers'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Sarala"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ContentNegotiation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'etag'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \\"),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Sarala"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Middleware"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ETag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"content-negotiation-middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#content-negotiation-middleware","aria-hidden":"true"}},[t._v("#")]),t._v(" Content Negotiation Middleware")]),t._v(" "),a("blockquote",[a("p",[t._v("Reference "),a("a",{attrs:{href:"https://jsonapi.org/format/#content-negotiation-servers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Content Negotiation Server Responsibilities"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("You can validate content negotiation header using this middleware:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[t._v("Route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("middleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'api_headers'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h5",{attrs:{id:"when-the-content-type-media-type-client-has-requested-is-not-supported-by-the-api-server-will-response-with"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#when-the-content-type-media-type-client-has-requested-is-not-supported-by-the-api-server-will-response-with","aria-hidden":"true"}},[t._v("#")]),t._v(" When the "),a("code",[t._v("Content-Type")]),t._v(" media type client has requested is not supported by the API. Server will response with:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Status: 415\n\n{\n    "error": {\n        "status": "415",\n        "title": "Unsupported Media Type"\n    }\n}\n')])])]),a("h5",{attrs:{id:"when-the-accept-media-type-client-has-requested-is-not-supported-by-the-api-server-will-response-with"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#when-the-accept-media-type-client-has-requested-is-not-supported-by-the-api-server-will-response-with","aria-hidden":"true"}},[t._v("#")]),t._v(" When the "),a("code",[t._v("Accept")]),t._v(" media type client has requested is not supported by the API. Server will response with:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Status: 406\n\n{\n    "error": {\n        "status": "406",\n        "title": "Not Acceptable"\n    }\n}\n')])])]),a("h3",{attrs:{id:"etag-middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etag-middleware","aria-hidden":"true"}},[t._v("#")]),t._v(" ETag Middleware")]),t._v(" "),a("blockquote",[a("p",[t._v("Reference "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag",target:"_blank",rel:"noopener noreferrer"}},[t._v("ETag"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("This middleware will:")]),t._v(" "),a("ul",[a("li",[t._v("Add "),a("code",[t._v("ETag")]),t._v(" header to the response.")]),t._v(" "),a("li",[t._v("Compares the "),a("code",[t._v("If-None-Match")]),t._v(" header sent by client against the current response "),a("code",[t._v("ETag")]),t._v(" and response accordingly.")])]),t._v(" "),a("p",[t._v("You can simply using this middleware:")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[t._v("Route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("middleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'etag'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h5",{attrs:{id:"when-the-if-none-match-header-sent-by-the-client-matches-with-the-current-response-server-will-response-with-304-not-modified-response"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#when-the-if-none-match-header-sent-by-the-client-matches-with-the-current-response-server-will-response-with-304-not-modified-response","aria-hidden":"true"}},[t._v("#")]),t._v(" When the "),a("code",[t._v("If-None-Match")]),t._v(" header sent by the client matches with the current response, server will response with "),a("code",[t._v("304 Not Modified")]),t._v(" response.")])])},[],!1,null,null,null);n.options.__file="middleware.md";e.default=n.exports}}]);